/*!
 * jQuery Form Plugin
 * version: 3.18 (28-SEP-2012)
 * @requires jQuery v1.5 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses:
 *    http://malsup.github.com/mit-license.txt
 *    http://malsup.github.com/gpl-license-v2.txt
 */

/*
* Underscore.string
* (c) 2010 Esa-Matti Suuronen <esa-matti aet suuronen dot org>
* Underscore.string is freely distributable under the terms of the MIT license.
* Documentation: https://github.com/epeli/underscore.string
* Some code is borrowed from MooTools and Alexandru Marasteanu.
* Version '3.3.4'
* @preserve
*/

!function(e){function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(r))}function r(t){var r=t.target,n=e(r);if(!n.is(":submit,input:image")){var i=n.closest(":submit");if(0===i.length)return;r=i[0]}var a=this;if(a.clk=r,"image"==r.type)if(void 0!==t.offsetX)a.clk_x=t.offsetX,a.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=n.offset();a.clk_x=t.pageX-o.left,a.clk_y=t.pageY-o.top}else a.clk_x=t.pageX-r.offsetLeft,a.clk_y=t.pageY-r.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)}function n(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var i={};i.fileapi=void 0!==e("<input type='file'/>").get(0).files,i.formdata=void 0!==window.FormData,e.fn.ajaxSubmit=function(t){function r(t){var r,n,i=e.param(t).split("&"),a=i.length,o={};for(r=0;a>r;r++)n=i[r].split("="),o[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);return o}function a(n){for(var i=new FormData,a=0;a<n.length;a++)i.append(n[a].name,n[a].value);if(t.extraData){var o=r(t.extraData);for(var c in o)o.hasOwnProperty(c)&&i.append(c,o[c])}t.data=null;var l=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:s||"POST"});t.uploadProgress&&(l.xhr=function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=function(e){var r=0,n=e.loaded||e.position,i=e.total;e.lengthComputable&&(r=Math.ceil(n/i*100)),t.uploadProgress(e,n,i,r)}),e}),l.data=null;var u=l.beforeSend;return l.beforeSend=function(e,t){t.data=i,u&&u.call(this,e,t)},e.ajax(l)}function o(r){function i(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function a(){function t(){try{var e=i(g).readyState;n("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){n("Server abort: ",r," (",r.name,")"),o(T),w&&clearTimeout(w),w=void 0}}var r=u.attr("target"),a=u.attr("action");k.setAttribute("target",d),s||k.setAttribute("method","POST"),a!=p.url&&k.setAttribute("action",p.url),p.skipEncodingOverride||s&&!/post/i.test(s)||u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),p.timeout&&(w=setTimeout(function(){x=!0,o(C)},p.timeout));var c=[];try{if(p.extraData)for(var l in p.extraData)p.extraData.hasOwnProperty(l)&&c.push(e.isPlainObject(p.extraData[l])&&p.extraData[l].hasOwnProperty("name")&&p.extraData[l].hasOwnProperty("value")?e('<input type="hidden" name="'+p.extraData[l].name+'">').attr("value",p.extraData[l].value).appendTo(k)[0]:e('<input type="hidden" name="'+l+'">').attr("value",p.extraData[l]).appendTo(k)[0]);p.iframeTarget||(m.appendTo("body"),g.attachEvent?g.attachEvent("onload",o):g.addEventListener("load",o,!1)),setTimeout(t,15),k.submit()}finally{k.setAttribute("action",a),r?k.setAttribute("target",r):u.removeAttr("target"),e(c).remove()}}function o(t){if(!v.aborted&&!L){try{D=i(g)}catch(r){n("cannot access response document: ",r),t=T}if(t===C&&v)return v.abort("timeout"),void j.reject(v,"timeout");if(t==T&&v)return v.abort("server abort"),void j.reject(v,"error","server abort");if(D&&D.location.href!=p.iframeSrc||x){g.detachEvent?g.detachEvent("onload",o):g.removeEventListener("load",o,!1);var a,s="success";try{if(x)throw"timeout";var c="xml"==p.dataType||D.XMLDocument||e.isXMLDoc(D);if(n("isXml="+c),!c&&window.opera&&(null===D.body||!D.body.innerHTML)&&--q)return n("requeing onLoad callback, DOM not available"),void setTimeout(o,250);var l=D.body?D.body:D.documentElement;v.responseText=l?l.innerHTML:null,v.responseXML=D.XMLDocument?D.XMLDocument:D,c&&(p.dataType="xml"),v.getResponseHeader=function(e){var t={"content-type":p.dataType};return t[e]},l&&(v.status=Number(l.getAttribute("status"))||v.status,v.statusText=l.getAttribute("statusText")||v.statusText);var u=(p.dataType||"").toLowerCase(),d=/(json|script|text)/.test(u);if(d||p.textarea){var h=D.getElementsByTagName("textarea")[0];if(h)v.responseText=h.value,v.status=Number(h.getAttribute("status"))||v.status,v.statusText=h.getAttribute("statusText")||v.statusText;else if(d){var b=D.getElementsByTagName("pre")[0],y=D.getElementsByTagName("body")[0];b?v.responseText=b.textContent?b.textContent:b.innerText:y&&(v.responseText=y.textContent?y.textContent:y.innerText)}}else"xml"==u&&!v.responseXML&&v.responseText&&(v.responseXML=R(v.responseText));try{F=z(v,u,p)}catch(t){s="parsererror",v.error=a=t||s}}catch(t){n("error caught: ",t),s="error",v.error=a=t||s}v.aborted&&(n("upload aborted"),s=null),v.status&&(s=v.status>=200&&v.status<300||304===v.status?"success":"error"),"success"===s?(p.success&&p.success.call(p.context,F,"success",v),j.resolve(v.responseText,"success",v),f&&e.event.trigger("ajaxSuccess",[v,p])):s&&(void 0===a&&(a=v.statusText),p.error&&p.error.call(p.context,v,s,a),j.reject(v,"error",a),f&&e.event.trigger("ajaxError",[v,p,a])),f&&e.event.trigger("ajaxComplete",[v,p]),f&&!--e.active&&e.event.trigger("ajaxStop"),p.complete&&p.complete.call(p.context,v,s),L=!0,p.timeout&&clearTimeout(w),setTimeout(function(){p.iframeTarget||m.remove(),v.responseXML=null},100)}}}var c,l,p,f,d,m,g,v,b,y,x,w,k=u[0],S=!!e.fn.prop,j=e.Deferred();if(e(":input[name=submit],:input[id=submit]",k).length)return alert('Error: Form elements must not have name or id of "submit".'),j.reject(),j;if(r)for(l=0;l<h.length;l++)c=e(h[l]),S?c.prop("disabled",!1):c.removeAttr("disabled");if(p=e.extend(!0,{},e.ajaxSettings,t),p.context=p.context||p,d="jqFormIO"+(new Date).getTime(),p.iframeTarget?(m=e(p.iframeTarget),y=m.attr("name"),y?d=y:m.attr("name",d)):(m=e('<iframe name="'+d+'" src="'+p.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=m[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";if(n("aborting upload... "+r),this.aborted=1,g.contentWindow.document.execCommand)try{g.contentWindow.document.execCommand("Stop")}catch(i){}m.attr("src",p.iframeSrc),v.error=r,p.error&&p.error.call(p.context,v,r,t),f&&e.event.trigger("ajaxError",[v,p,r]),p.complete&&p.complete.call(p.context,v,r)}},f=p.global,f&&0===e.active++&&e.event.trigger("ajaxStart"),f&&e.event.trigger("ajaxSend",[v,p]),p.beforeSend&&p.beforeSend.call(p.context,v,p)===!1)return p.global&&e.active--,j.reject(),j;if(v.aborted)return j.reject(),j;b=k.clk,b&&(y=b.name,y&&!b.disabled&&(p.extraData=p.extraData||{},p.extraData[y]=b.value,"image"==b.type&&(p.extraData[y+".x"]=k.clk_x,p.extraData[y+".y"]=k.clk_y)));var C=1,T=2,E=e("meta[name=csrf-token]").attr("content"),_=e("meta[name=csrf-param]").attr("content");_&&E&&(p.extraData=p.extraData||{},p.extraData[_]=E),p.forceSync?a():setTimeout(a,10);var F,D,L,q=50,R=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},A=e.parseJSON||function(e){return window.eval("("+e+")")},z=function(t,r,n){var i=t.getResponseHeader("content-type")||"",a="xml"===r||!r&&i.indexOf("xml")>=0,o=a?t.responseXML:t.responseText;return a&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),n&&n.dataFilter&&(o=n.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&i.indexOf("json")>=0?o=A(o):("script"===r||!r&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return j}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var s,c,l,u=this;"function"==typeof t&&(t={success:t}),s=this.attr("method"),c=this.attr("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:s||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var p={};if(this.trigger("form-pre-serialize",[this,t,p]),p.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var f=t.traditional;void 0===f&&(f=e.ajaxSettings.traditional);var d,h=[],m=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,d=e.param(t.data,f)),t.beforeSubmit&&t.beforeSubmit(m,this,t)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,t,p]),p.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(m,f);d&&(g=g?g+"&"+d:d),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var v=[];if(t.resetForm&&v.push(function(){u.resetForm()}),t.clearForm&&v.push(function(){u.clearForm(t.includeHidden)}),!t.dataType&&t.target){var b=t.success||function(){};v.push(function(r){var n=t.replaceTarget?"replaceWith":"html";e(t.target)[n](r).each(b,arguments)})}else t.success&&v.push(t.success);t.success=function(e,r,n){for(var i=t.context||this,a=0,o=v.length;o>a;a++)v[a].apply(i,[e,r,n||u,u])};var y=e("input:file:enabled[value]",this),x=y.length>0,w="multipart/form-data",k=u.attr("enctype")==w||u.attr("encoding")==w,S=i.fileapi&&i.formdata;n("fileAPI :"+S);var j,C=(x||k)&&!S;t.iframe!==!1&&(t.iframe||C)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){j=o(m)}):j=o(m):j=(x||k)&&S?a(m):e.ajax(t),u.removeData("jqxhr").data("jqxhr",j);for(var T=0;T<h.length;T++)h[T]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(i){if(i=i||{},i.delegation=i.delegation&&e.isFunction(e.fn.on),!i.delegation&&0===this.length){var a={s:this.selector,c:this.context};return!e.isReady&&a.s?(n("DOM not ready, queuing ajaxForm"),e(function(){e(a.s,a.c).ajaxForm(i)}),this):(n("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return i.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,i,t).on("click.form-plugin",this.selector,i,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",i,t).bind("click.form-plugin",i,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var n=[];if(0===this.length)return n;var a=this[0],o=t?a.getElementsByTagName("*"):a.elements;if(!o)return n;var s,c,l,u,p,f,d;for(s=0,f=o.length;f>s;s++)if(p=o[s],l=p.name)if(t&&a.clk&&"image"==p.type)p.disabled||a.clk!=p||(n.push({name:l,value:e(p).val(),type:p.type}),n.push({name:l+".x",value:a.clk_x},{name:l+".y",value:a.clk_y}));else if(u=e.fieldValue(p,!0),u&&u.constructor==Array)for(r&&r.push(p),c=0,d=u.length;d>c;c++)n.push({name:l,value:u[c]});else if(i.fileapi&&"file"==p.type&&!p.disabled){r&&r.push(p);var h=p.files;if(h.length)for(c=0;c<h.length;c++)n.push({name:l,value:h[c],type:p.type});else n.push({name:l,value:"",type:p.type})}else null!==u&&"undefined"!=typeof u&&(r&&r.push(p),n.push({name:l,value:u,type:p.type,required:p.required}));if(!t&&a.clk){var m=e(a.clk),g=m[0];l=g.name,l&&!g.disabled&&"image"==g.type&&(n.push({name:l,value:m.val()}),n.push({name:l+".x",value:a.clk_x},{name:l+".y",value:a.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var n=this.name;if(n){var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var a=0,o=i.length;o>a;a++)r.push({name:n,value:i[a]});else null!==i&&"undefined"!=typeof i&&r.push({name:this.name,value:i})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],n=0,i=this.length;i>n;n++){var a=this[n],o=e.fieldValue(a,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var n=t.name,i=t.type,a=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!n||t.disabled||"reset"==i||"button"==i||("checkbox"==i||"radio"==i)&&!t.checked||("submit"==i||"image"==i)&&t.form&&t.form.clk!=t||"select"==a&&-1==t.selectedIndex))return null;if("select"==a){var o=t.selectedIndex;if(0>o)return null;for(var s=[],c=t.options,l="select-one"==i,u=l?o+1:c.length,p=l?o:0;u>p;p++){var f=c[p];if(f.selected){var d=f.value;if(d||(d=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),l)return d;s.push(d)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,i=this.tagName.toLowerCase();r.test(n)||"textarea"==i?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==i?this.selectedIndex=-1:t&&(t===!0&&/hidden/.test(n)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r)this.checked=t;else if("option"==this.tagName.toLowerCase()){var n=e(this).parent("select");t&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),define("jquery.form",["jquery"],function(e){return function(){var t;return t||e.jQuery.fn.ajaxForm}}(this)),define("js/utils/cancel_on_escape",["jquery"],function(e){var t=e("body"),r=function(e){27==e.which&&(t.unbind("keyup",r),e.data.$cancelButton.click())},n=function(e){t.bind("keyup",{$cancelButton:e},r)};return n}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("underscore.string",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.s=e()}}(function(){var e;return function t(e,r,n){function i(o,s){if(!r[o]){if(!e[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};e[o][0].call(u.exports,function(t){var r=e[o][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t){var r=e("./trim"),n=e("./decapitalize");t.exports=function(e,t){return e=r(e).replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),t===!0?n(e):e}},{"./decapitalize":10,"./trim":65}],2:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e);var n=t?e.slice(1).toLowerCase():e.slice(1);return e.charAt(0).toUpperCase()+n}},{"./helper/makeString":20}],3:[function(e,t){var r=e("./helper/makeString");t.exports=function(e){return r(e).split("")}},{"./helper/makeString":20}],4:[function(e,t){t.exports=function(e,t){return null==e?[]:(e=String(e),t=~~t,t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])}},{}],5:[function(e,t){var r=e("./capitalize"),n=e("./camelize"),i=e("./helper/makeString");t.exports=function(e){return e=i(e),r(n(e.replace(/[\W_]/g," ")).replace(/\s/g,""))}},{"./camelize":1,"./capitalize":2,"./helper/makeString":20}],6:[function(e,t){var r=e("./trim");t.exports=function(e){return r(e).replace(/\s\s+/g," ")}},{"./trim":65}],7:[function(e,t){var r=e("./helper/makeString"),n="ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșşšŝťțţŭùúüűûñÿýçżźž",i="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz";n+=n.toUpperCase(),i+=i.toUpperCase(),i=i.split(""),n+="ß",i.push("ss"),t.exports=function(e){return r(e).replace(/.{1}/g,function(e){var t=n.indexOf(e);return-1===t?e:i[t]})}},{"./helper/makeString":20}],8:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){return e=r(e),t=r(t),0===e.length||0===t.length?0:e.split(t).length-1}},{"./helper/makeString":20}],9:[function(e,t){var r=e("./trim");t.exports=function(e){return r(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}},{"./trim":65}],10:[function(e,t){var r=e("./helper/makeString");t.exports=function(e){return e=r(e),e.charAt(0).toLowerCase()+e.slice(1)}},{"./helper/makeString":20}],11:[function(e,t){function r(e){for(var t=e.match(/^[\s\\t]*/gm),r=t[0].length,n=1;n<t.length;n++)r=Math.min(t[n].length,r);return r}var n=e("./helper/makeString");t.exports=function(e,t){e=n(e);var i,a=r(e);return 0===a?e:(i="string"==typeof t?new RegExp("^"+t,"gm"):new RegExp("^[ \\t]{"+a+"}","gm"),e.replace(i,""))}},{"./helper/makeString":20}],12:[function(e,t){var r=e("./helper/makeString"),n=e("./helper/toPositive");t.exports=function(e,t,i){return e=r(e),t=""+t,i="undefined"==typeof i?e.length-t.length:Math.min(n(i),e.length)-t.length,i>=0&&e.indexOf(t,i)===i}},{"./helper/makeString":20,"./helper/toPositive":22}],13:[function(e,t){var r=e("./helper/makeString"),n=e("./helper/escapeChars"),i="[";for(var a in n)i+=a;i+="]";var o=new RegExp(i,"g");t.exports=function(e){return r(e).replace(o,function(e){return"&"+n[e]+";"})}},{"./helper/escapeChars":17,"./helper/makeString":20}],14:[function(e,t){t.exports=function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse|join|map|wrap)$/)&&(e[t]=this[t]);return e}},{}],15:[function(e,t){var r=e("./makeString");t.exports=function(e,t){return e=r(e),0===e.length?"":e.slice(0,-1)+String.fromCharCode(e.charCodeAt(e.length-1)+t)}},{"./makeString":20}],16:[function(e,t){var r=e("./escapeRegExp");t.exports=function(e){return null==e?"\\s":e.source?e.source:"["+r(e)+"]"}},{"./escapeRegExp":18}],17:[function(e,t){var r={"¢":"cent","£":"pound","¥":"yen","€":"euro","©":"copy","®":"reg","<":"lt",">":"gt",'"':"quot","&":"amp","'":"#39"};t.exports=r},{}],18:[function(e,t){var r=e("./makeString");t.exports=function(e){return r(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},{"./makeString":20}],19:[function(e,t){var r={nbsp:" ",cent:"¢",pound:"£",yen:"¥",euro:"€",copy:"©",reg:"®",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};t.exports=r},{}],20:[function(e,t){t.exports=function(e){return null==e?"":""+e}},{}],21:[function(e,t){t.exports=function(e,t){if(1>t)return"";for(var r="";t>0;)1&t&&(r+=e),t>>=1,e+=e;return r}},{}],22:[function(e,t){t.exports=function(e){return 0>e?0:+e||0}},{}],23:[function(e,t){var r=e("./capitalize"),n=e("./underscored"),i=e("./trim");t.exports=function(e){return r(i(n(e).replace(/_id$/,"").replace(/_/g," ")))}},{"./capitalize":2,"./trim":65,"./underscored":67}],24:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){return""===t?!0:-1!==r(e).indexOf(t)}},{"./helper/makeString":20}],25:[function(e,t){function r(e){return this instanceof r?void(this._wrapped=e):new r(e)}function n(e,t){"function"==typeof t&&(r.prototype[e]=function(){var e=[this._wrapped].concat(Array.prototype.slice.call(arguments)),n=t.apply(null,e);return"string"==typeof n?new r(n):n})}function i(e){n(e,function(t){var r=Array.prototype.slice.call(arguments,1);return String.prototype[e].apply(t,r)})}r.VERSION="3.3.4",r.isBlank=e("./isBlank"),r.stripTags=e("./stripTags"),r.capitalize=e("./capitalize"),r.decapitalize=e("./decapitalize"),r.chop=e("./chop"),r.trim=e("./trim"),r.clean=e("./clean"),r.cleanDiacritics=e("./cleanDiacritics"),r.count=e("./count"),r.chars=e("./chars"),r.swapCase=e("./swapCase"),r.escapeHTML=e("./escapeHTML"),r.unescapeHTML=e("./unescapeHTML"),r.splice=e("./splice"),r.insert=e("./insert"),r.replaceAll=e("./replaceAll"),r.include=e("./include"),r.join=e("./join"),r.lines=e("./lines"),r.dedent=e("./dedent"),r.reverse=e("./reverse"),r.startsWith=e("./startsWith"),r.endsWith=e("./endsWith"),r.pred=e("./pred"),r.succ=e("./succ"),r.titleize=e("./titleize"),r.camelize=e("./camelize"),r.underscored=e("./underscored"),r.dasherize=e("./dasherize"),r.classify=e("./classify"),r.humanize=e("./humanize"),r.ltrim=e("./ltrim"),r.rtrim=e("./rtrim"),r.truncate=e("./truncate"),r.prune=e("./prune"),r.words=e("./words"),r.pad=e("./pad"),r.lpad=e("./lpad"),r.rpad=e("./rpad"),r.lrpad=e("./lrpad"),r.sprintf=e("./sprintf"),r.vsprintf=e("./vsprintf"),r.toNumber=e("./toNumber"),r.numberFormat=e("./numberFormat"),r.strRight=e("./strRight"),r.strRightBack=e("./strRightBack"),r.strLeft=e("./strLeft"),r.strLeftBack=e("./strLeftBack"),r.toSentence=e("./toSentence"),r.toSentenceSerial=e("./toSentenceSerial"),r.slugify=e("./slugify"),r.surround=e("./surround"),r.quote=e("./quote"),r.unquote=e("./unquote"),r.repeat=e("./repeat"),r.naturalCmp=e("./naturalCmp"),r.levenshtein=e("./levenshtein"),r.toBoolean=e("./toBoolean"),r.exports=e("./exports"),r.escapeRegExp=e("./helper/escapeRegExp"),r.wrap=e("./wrap"),r.map=e("./map"),r.strip=r.trim,r.lstrip=r.ltrim,r.rstrip=r.rtrim,r.center=r.lrpad,r.rjust=r.lpad,r.ljust=r.rpad,r.contains=r.include,r.q=r.quote,r.toBool=r.toBoolean,r.camelcase=r.camelize,r.mapChars=r.map,r.prototype={value:function(){return this._wrapped}};for(var a in r)n(a,r[a]);n("tap",function(e,t){return t(e)});var o=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var s in o)i(o[s]);t.exports=r},{"./camelize":1,"./capitalize":2,"./chars":3,"./chop":4,"./classify":5,"./clean":6,"./cleanDiacritics":7,"./count":8,"./dasherize":9,"./decapitalize":10,"./dedent":11,"./endsWith":12,"./escapeHTML":13,"./exports":14,"./helper/escapeRegExp":18,"./humanize":23,"./include":24,"./insert":26,"./isBlank":27,"./join":28,"./levenshtein":29,"./lines":30,"./lpad":31,"./lrpad":32,"./ltrim":33,"./map":34,"./naturalCmp":35,"./numberFormat":38,"./pad":39,"./pred":40,"./prune":41,"./quote":42,"./repeat":43,"./replaceAll":44,"./reverse":45,"./rpad":46,"./rtrim":47,"./slugify":48,"./splice":49,"./sprintf":50,"./startsWith":51,"./strLeft":52,"./strLeftBack":53,"./strRight":54,"./strRightBack":55,"./stripTags":56,"./succ":57,"./surround":58,"./swapCase":59,"./titleize":60,"./toBoolean":61,"./toNumber":62,"./toSentence":63,"./toSentenceSerial":64,"./trim":65,"./truncate":66,"./underscored":67,"./unescapeHTML":68,"./unquote":69,"./vsprintf":70,"./words":71,"./wrap":72}],26:[function(e,t){var r=e("./splice");t.exports=function(e,t,n){return r(e,t,0,n)}},{"./splice":49}],27:[function(e,t){var r=e("./helper/makeString");t.exports=function(e){return/^\s*$/.test(r(e))}},{"./helper/makeString":20}],28:[function(e,t){var r=e("./helper/makeString"),n=[].slice;t.exports=function(){var e=n.call(arguments),t=e.shift();return e.join(r(t))}},{"./helper/makeString":20}],29:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){if(e=r(e),t=r(t),e===t)return 0;if(!e||!t)return Math.max(e.length,t.length);for(var n=new Array(t.length+1),i=0;i<n.length;++i)n[i]=i;for(i=0;i<e.length;++i){for(var a=i+1,o=0;o<t.length;++o){var s=a;a=n[o]+(e.charAt(i)===t.charAt(o)?0:1);var c=s+1;a>c&&(a=c),c=n[o+1]+1,a>c&&(a=c),n[o]=s}n[o]=a}return a}},{"./helper/makeString":20}],30:[function(e,t){t.exports=function(e){return null==e?[]:String(e).split(/\r\n?|\n/)}},{}],31:[function(e,t){var r=e("./pad");t.exports=function(e,t,n){return r(e,t,n)}},{"./pad":39}],32:[function(e,t){var r=e("./pad");t.exports=function(e,t,n){return r(e,t,n,"both")}},{"./pad":39}],33:[function(e,t){var r=e("./helper/makeString"),n=e("./helper/defaultToWhiteSpace"),i=String.prototype.trimLeft;t.exports=function(e,t){return e=r(e),!t&&i?i.call(e):(t=n(t),e.replace(new RegExp("^"+t+"+"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":20}],34:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){return e=r(e),0===e.length||"function"!=typeof t?e:e.replace(/./g,t)}},{"./helper/makeString":20}],35:[function(e,t){t.exports=function(e,t){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var r=/(\.\d+|\d+|\D+)/g,n=String(e).match(r),i=String(t).match(r),a=Math.min(n.length,i.length),o=0;a>o;o++){var s=n[o],c=i[o];if(s!==c){var l=+s,u=+c;return l===l&&u===u?l>u?1:-1:c>s?-1:1}}return n.length!=i.length?n.length-i.length:t>e?-1:1}},{}],36:[function(t,r,n){!function(t){function r(){var e=arguments[0],t=r.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=r.parse(e)),r.format.call(null,t[e],arguments)}function i(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function a(e,t){return Array(t+1).join(e)}var o={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};r.format=function(e,t){var n,s,c,l,u,p,f,d=1,h=e.length,m="",g=[],v=!0,b="";for(s=0;h>s;s++)if(m=i(e[s]),"string"===m)g[g.length]=e[s];else if("array"===m){if(l=e[s],l[2])for(n=t[d],c=0;c<l[2].length;c++){if(!n.hasOwnProperty(l[2][c]))throw new Error(r("[sprintf] property '%s' does not exist",l[2][c]));n=n[l[2][c]]}else n=l[1]?t[l[1]]:t[d++];if("function"==i(n)&&(n=n()),o.not_string.test(l[8])&&o.not_json.test(l[8])&&"number"!=i(n)&&isNaN(n))throw new TypeError(r("[sprintf] expecting number but found %s",i(n)));switch(o.number.test(l[8])&&(v=n>=0),l[8]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,l[6]?parseInt(l[6]):0);break;case"e":n=l[7]?n.toExponential(l[7]):n.toExponential();break;case"f":n=l[7]?parseFloat(n).toFixed(l[7]):parseFloat(n);break;case"g":n=l[7]?parseFloat(n).toPrecision(l[7]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&l[7]?n.substring(0,l[7]):n;break;case"u":n>>>=0;break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}o.json.test(l[8])?g[g.length]=n:(!o.number.test(l[8])||v&&!l[3]?b="":(b=v?"+":"-",n=n.toString().replace(o.sign,"")),p=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",f=l[6]-(b+n).length,u=l[6]?f>0?a(p,f):"":"",g[g.length]=l[5]?b+n+u:"0"===p?b+u+n:u+b+n)}return g.join("")},r.cache={},r.parse=function(e){for(var t=e,r=[],n=[],i=0;t;){if(null!==(r=o.text.exec(t)))n[n.length]=r[0];else if(null!==(r=o.modulo.exec(t)))n[n.length]="%";else{if(null===(r=o.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){i|=1;var a=[],s=r[2],c=[];if(null===(c=o.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=c[1];""!==(s=s.substring(c[0].length));)if(null!==(c=o.key_access.exec(s)))a[a.length]=c[1];else{if(null===(c=o.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=c[1]}r[2]=a}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n[n.length]=r}t=t.substring(r[0].length)}return n};var s=function(e,t,n){return n=(t||[]).slice(0),n.splice(0,0,e),r.apply(null,n)};"undefined"!=typeof n?(n.sprintf=r,n.vsprintf=s):(t.sprintf=r,t.vsprintf=s,"function"==typeof e&&e.amd&&e(function(){return{sprintf:r,vsprintf:s}}))}("undefined"==typeof window?this:window)},{}],37:[function(e,t){(function(e){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null==n?!1:"true"===String(n).toLowerCase()}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(e,t){t.exports=function(e,t,r,n){if(isNaN(e)||null==e)return"";e=e.toFixed(~~t),n="string"==typeof n?n:",";var i=e.split("."),a=i[0],o=i[1]?(r||".")+i[1]:"";return a.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+o}},{}],39:[function(e,t){var r=e("./helper/makeString"),n=e("./helper/strRepeat");t.exports=function(e,t,i,a){e=r(e),t=~~t;var o=0;switch(i?i.length>1&&(i=i.charAt(0)):i=" ",a){case"right":return o=t-e.length,e+n(i,o);case"both":return o=t-e.length,n(i,Math.ceil(o/2))+e+n(i,Math.floor(o/2));default:return o=t-e.length,n(i,o)+e}}},{"./helper/makeString":20,"./helper/strRepeat":21}],40:[function(e,t){var r=e("./helper/adjacent");t.exports=function(e){return r(e,-1)}},{"./helper/adjacent":15}],41:[function(e,t){var r=e("./helper/makeString"),n=e("./rtrim");t.exports=function(e,t,i){if(e=r(e),t=~~t,i=null!=i?String(i):"...",e.length<=t)return e;var a=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},o=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,a);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):n(o.slice(0,o.length-1)),(o+i).length>e.length?e:e.slice(0,o.length)+i}},{"./helper/makeString":20,"./rtrim":47}],42:[function(e,t){var r=e("./surround");t.exports=function(e,t){return r(e,t||'"')}},{"./surround":58}],43:[function(e,t){var r=e("./helper/makeString"),n=e("./helper/strRepeat");t.exports=function i(e,t,a){if(e=r(e),t=~~t,null==a)return n(e,t);for(var i=[];t>0;i[--t]=e);return i.join(a)}},{"./helper/makeString":20,"./helper/strRepeat":21}],44:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t,n,i){var a=i===!0?"gi":"g",o=new RegExp(t,a);return r(e).replace(o,n)}},{"./helper/makeString":20}],45:[function(e,t){var r=e("./chars");t.exports=function(e){return r(e).reverse().join("")}},{"./chars":3}],46:[function(e,t){var r=e("./pad");t.exports=function(e,t,n){return r(e,t,n,"right")}},{"./pad":39}],47:[function(e,t){var r=e("./helper/makeString"),n=e("./helper/defaultToWhiteSpace"),i=String.prototype.trimRight;t.exports=function(e,t){return e=r(e),!t&&i?i.call(e):(t=n(t),e.replace(new RegExp(t+"+$"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":20}],48:[function(e,t){var r=e("./trim"),n=e("./dasherize"),i=e("./cleanDiacritics");t.exports=function(e){return r(n(i(e).replace(/[^\w\s-]/g,"-").toLowerCase()),"-")}},{"./cleanDiacritics":7,"./dasherize":9,"./trim":65}],49:[function(e,t){var r=e("./chars");t.exports=function(e,t,n,i){var a=r(e);return a.splice(~~t,~~n,i),a.join("")}},{"./chars":3}],50:[function(e,t){var r=e("util-deprecate");t.exports=r(e("sprintf-js").sprintf,"sprintf() will be removed in the next major release, use the sprintf-js package instead.")},{"sprintf-js":36,"util-deprecate":37}],51:[function(e,t){var r=e("./helper/makeString"),n=e("./helper/toPositive");t.exports=function(e,t,i){return e=r(e),t=""+t,i=null==i?0:Math.min(n(i),e.length),e.lastIndexOf(t,i)===i}},{"./helper/makeString":20,"./helper/toPositive":22}],52:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=r(t);var n=t?e.indexOf(t):-1;return~n?e.slice(0,n):e}},{"./helper/makeString":20}],53:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=r(t);var n=e.lastIndexOf(t);return~n?e.slice(0,n):e}},{"./helper/makeString":20}],54:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=r(t);var n=t?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},{"./helper/makeString":20}],55:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=r(t);var n=t?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e}},{"./helper/makeString":20}],56:[function(e,t){var r=e("./helper/makeString");t.exports=function(e){return r(e).replace(/<\/?[^>]+>/g,"")}},{"./helper/makeString":20}],57:[function(e,t){var r=e("./helper/adjacent");t.exports=function(e){return r(e,1)}},{"./helper/adjacent":15}],58:[function(e,t){t.exports=function(e,t){return[t,e,t].join("")}},{}],59:[function(e,t){var r=e("./helper/makeString");t.exports=function(e){return r(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()
})}},{"./helper/makeString":20}],60:[function(e,t){var r=e("./helper/makeString");t.exports=function(e){return r(e).toLowerCase().replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})}},{"./helper/makeString":20}],61:[function(e,t){function r(e,t){var r,n,i=e.toLowerCase();for(t=[].concat(t),r=0;r<t.length;r+=1)if(n=t[r]){if(n.test&&n.test(e))return!0;if(n.toLowerCase()===i)return!0}}var n=e("./trim");t.exports=function(e,t,i){return"number"==typeof e&&(e=""+e),"string"!=typeof e?!!e:(e=n(e),r(e,t||["true","1"])?!0:r(e,i||["false","0"])?!1:void 0)}},{"./trim":65}],62:[function(e,t){t.exports=function(e,t){if(null==e)return 0;var r=Math.pow(10,isFinite(t)?t:0);return Math.round(e*r)/r}},{}],63:[function(e,t){var r=e("./rtrim");t.exports=function(e,t,n,i){t=t||", ",n=n||" and ";var a=e.slice(),o=a.pop();return e.length>2&&i&&(n=r(t)+n),a.length?a.join(t)+n+o:o}},{"./rtrim":47}],64:[function(e,t){var r=e("./toSentence");t.exports=function(e,t,n){return r(e,t,n,!0)}},{"./toSentence":63}],65:[function(e,t){var r=e("./helper/makeString"),n=e("./helper/defaultToWhiteSpace"),i=String.prototype.trim;t.exports=function(e,t){return e=r(e),!t&&i?i.call(e):(t=n(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))}},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":20}],66:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t,n){return e=r(e),n=n||"...",t=~~t,e.length>t?e.slice(0,t)+n:e}},{"./helper/makeString":20}],67:[function(e,t){var r=e("./trim");t.exports=function(e){return r(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}},{"./trim":65}],68:[function(e,t){var r=e("./helper/makeString"),n=e("./helper/htmlEntities");t.exports=function(e){return r(e).replace(/\&([^;]+);/g,function(e,t){var r;return t in n?n[t]:(r=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(r[1],16)):(r=t.match(/^#(\d+)$/))?String.fromCharCode(~~r[1]):e})}},{"./helper/htmlEntities":19,"./helper/makeString":20}],69:[function(e,t){t.exports=function(e,t){return t=t||'"',e[0]===t&&e[e.length-1]===t?e.slice(1,e.length-1):e}},{}],70:[function(e,t){var r=e("util-deprecate");t.exports=r(e("sprintf-js").vsprintf,"vsprintf() will be removed in the next major release, use the sprintf-js package instead.")},{"sprintf-js":36,"util-deprecate":37}],71:[function(e,t){var r=e("./isBlank"),n=e("./trim");t.exports=function(e,t){return r(e)?[]:n(e,t).split(t||/\s+/)}},{"./isBlank":27,"./trim":65}],72:[function(e,t){var r=e("./helper/makeString");t.exports=function(e,t){e=r(e),t=t||{};var n,i=t.width||75,a=t.seperator||"\n",o=t.cut||!1,s=t.preserveSpaces||!1,c=t.trailingSpaces||!1;if(0>=i)return e;if(o){var l=0;for(n="";l<e.length;)l%i==0&&l>0&&(n+=a),n+=e.charAt(l),l++;if(c)for(;l%i>0;)n+=" ",l++;return n}var u=e.split(" "),p=0;for(n="";u.length>0;){if(1+u[0].length+p>i&&p>0){if(s)n+=" ",p++;else if(c)for(;i>p;)n+=" ",p++;n+=a,p=0}p>0&&(n+=" ",p++),n+=u[0],p+=u[0].length,u.shift()}if(c)for(;i>p;)n+=" ",p++;return n}},{"./helper/makeString":20}]},{},[25])(25)}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!common/templates/components/system-feedback.underscore",[],function(){return'<div class="wrapper wrapper-<%= type %> wrapper-<%= type %>-<%= intent %>\n            <% if(obj.shown) { %>is-shown<% } else { %>is-hiding<% } %>\n            <% if(_.contains([\'help\', \'mini\'], intent)) { %>wrapper-<%= type %>-status<% } %>"\n     id="<%= type %>-<%= intent %>"\n     aria-hidden="<% if(obj.shown) { %>false<% } else { %>true<% } %>"\n     aria-labelledby="<%= type %>-<%= intent %>-title"\n     tabindex="-1"\n     <% if (obj.message) { %>aria-describedby="<%= type %>-<%= intent %>-description" <% } %>\n     <% if (obj.actions) { %>role="dialog"<% } %>\n  >\n  <div class="<%= type %> <%= intent %> <% if(obj.actions) { %>has-actions<% } %>">\n    <% if(obj.icon) { %>\n      <% var iconClass = {"warning": "warning", "confirmation": "check", "error": "warning", "announcement": "bullhorn", "step-required": "exclamation-circle", "help": "question", "mini": "cog"} %>\n      <i class="feedback-symbol fa fa-<%= iconClass[intent] %>"></i>\n    <% } %>\n\n    <div class="copy">\n      <h2 class="title title-3" id="<%= type %>-<%= intent %>-title"><%- title %></h2>\n      <% if(obj.message) { %><p class="message" id="<%= type %>-<%= intent %>-description"><%- message %></p><% } %>\n    </div>\n\n    <% if(obj.actions) { %>\n    <nav class="nav-actions">\n      <ul>\n        <% if(actions.primary) { %>\n        <li class="nav-item">\n          <button class="action-primary <%= actions.primary.class %>"><%- actions.primary.text %></button>\n        </li>\n        <% } %>\n        <% if(actions.secondary) {\n             _.each(actions.secondary, function(secondary) { %>\n        <li class="nav-item">\n          <button class="action-secondary <%= secondary.class %>"><%- secondary.text %></button>\n        </li>\n        <%   });\n           } %>\n      </ul>\n    </nav>\n    <% } %>\n\n    <% if(obj.closeIcon) { %>\n    <a href="#" rel="view" class="action action-close action-<%= type %>-close">\n      <i class="icon fa fa-times-circle"></i>\n      <span class="label">close <%= type %></span>\n    </a>\n    <% } %>\n  </div>\n</div>\n'}),function(e){e("common/js/components/views/feedback",["jquery","underscore","underscore.string","backbone","text!common/templates/components/system-feedback.underscore"],function(e,t,r,n,i){var a=["a[href]:not([tabindex='-1'])","area[href]:not([tabindex='-1'])","input:not([disabled]):not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","iframe:not([tabindex='-1'])","[tabindex]:not([tabindex='-1'])","[contentEditable=true]:not([tabindex='-1'])"],o=n.View.extend({options:{title:"",message:"",intent:null,type:null,shown:!0,icon:!0,closeIcon:!0,minShown:0,maxShown:1/0,outFocusElement:null},initialize:function(){if(!this.options.type)throw"SystemFeedback: type required (given "+JSON.stringify(this.options)+")";if(!this.options.intent)throw"SystemFeedback: intent required (given "+JSON.stringify(this.options)+")";return this.setElement(e("#page-"+this.options.type)),this.options.actions&&this.options.actions.secondary&&!t.isArray(this.options.actions.secondary)&&(this.options.actions.secondary=[this.options.actions.secondary]),this},inFocus:function(){this.options.outFocusElement=this.options.outFocusElement||document.activeElement,this.$(".wrapper").first().focus();var e=this.$(a.join());return e.on("keydown",function(t){9===t.which&&t.shiftKey&&t.target===e.first()[0]?(t.preventDefault(),e.last().focus()):9!==t.which||t.shiftKey||t.target!==e.last()[0]||(t.preventDefault(),e.first().focus())}),this},outFocus:function(){this.$(a.join()).off("keydown");return this.options.outFocusElement&&this.options.outFocusElement.focus(),this},show:function(){return clearTimeout(this.hideTimeout),this.options.shown=!0,this.shownAt=new Date,this.render(),e.isNumeric(this.options.maxShown)&&(this.hideTimeout=setTimeout(t.bind(this.hide,this),this.options.maxShown)),this},hide:function(){return this.shownAt&&e.isNumeric(this.options.minShown)&&this.options.minShown>new Date-this.shownAt?(clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(t.bind(this.hide,this),this.options.minShown-(new Date-this.shownAt))):(this.options.shown=!1,delete this.shownAt,this.render()),this},events:{"click .action-close":"hide","click .action-primary":"primaryClick","click .action-secondary":"secondaryClick"},render:function(){var e=o["active_"+this.options.type];return e&&e!==this&&(e.stopListening(),e.undelegateEvents()),this.$el.html(t.template(i)(this.options)),o["active_"+this.options.type]=this,this},primaryClick:function(e){var t,r;t=this.options.actions,t&&(r=t.primary,r&&(r.preventDefault!==!1&&e.preventDefault(),r.click&&r.click.call(e.target,this,e)))},secondaryClick:function(e){var r,n,i,a;r=this.options.actions,r&&(n=r.secondary,n&&(a=0,e&&e.target&&(a=t.indexOf(this.$(".action-secondary"),e.target)),i=n[a],i.preventDefault!==!1&&e.preventDefault(),i.click&&i.click.call(e.target,this,e)))}});return o})}.call(this,define||RequireJS.define),function(e){e("common/js/components/views/feedback_notification",["jquery","underscore","underscore.string","common/js/components/views/feedback"],function(e,t,r,n){var i,a,o=n.extend({options:e.extend({},n.prototype.options,{type:"notification",closeIcon:!1})});i=t.compose(r.capitalize,r.camelize),a=["warning","error","confirmation","announcement","step-required","help","mini"],t.each(a,function(t){var r;r=o.extend({options:e.extend({},o.prototype.options,{intent:t})}),o[i(t)]=r});var s=o.Mini.prototype.options;return s.minShown=1250,s.closeIcon=!1,o})}.call(this,define||RequireJS.define),function(e){e("common/js/components/views/feedback_prompt",["jquery","underscore","underscore.string","common/js/components/views/feedback"],function(e,t,r,n){var i,a,o=n.extend({options:e.extend({},n.prototype.options,{type:"prompt",closeIcon:!1,icon:!1}),render:function(){return window.$body||(window.$body=e(document.body)),this.options.shown?$body.addClass("prompt-is-shown"):$body.removeClass("prompt-is-shown"),n.prototype.render.apply(this,arguments)},show:function(){return n.prototype.show.apply(this,arguments),this.inFocus()},hide:function(){return n.prototype.hide.apply(this,arguments),this.outFocus()}});return i=t.compose(r.capitalize,r.camelize),a=["warning","error","confirmation","announcement","step-required","help","mini"],t.each(a,function(t){var r;r=o.extend({options:e.extend({},o.prototype.options,{intent:t})}),o[i(t)]=r}),o})}.call(this,define||RequireJS.define),function(e,t){e("common/js/components/utils/view_utils",["jquery","underscore","gettext","common/js/components/views/feedback_notification","common/js/components/views/feedback_prompt"],function(e,r,n,i,a){var o,s,c,l,u,p,f,d,h,m,g,v,b,y,x,w,k,S,j,C=65;return o=function(e,t){t||(t="collapsed"),e.closest(".expand-collapse").toggleClass("expand collapse"),e.closest(".is-collapsible, .window").toggleClass(t),e.closest(".is-collapsible").children("article").slideToggle()},s=function(){e(".ui-loading").show()},c=function(){e(".ui-loading").hide()},l=function(e,t,r,i,o){return new a.Warning({title:e,message:t,actions:{primary:{text:r,click:function(e){e.hide(),i()}},secondary:{text:n("Cancel"),click:function(e){return o&&o(),e.hide()}}}}).show()},u=function(e,t){var r;return r=new i.Mini({title:n(e)}),r.show(),t().done(function(){r.hide()})},p=function(t){return function(r){var n=this;f(e(r.currentTarget),function(){return n[t].apply(n,[r])})}},f=function(e,t){return e.addClass("is-disabled").attr("aria-disabled",!0),t().always(function(){e.removeClass("is-disabled").attr("aria-disabled",!1)})},y=function(t){return function(r){r.preventDefault(),e.ajax({url:e(this).data("dismiss-link"),type:"DELETE",success:t})}},m=function(t){e("html, body").animate({scrollTop:t},500)},d=function(t){var r=t.offset().top;return r-e(window).scrollTop()},h=function(e,t){var r=e.offset().top,n=r-t;m(n)},g=function(e){window.location=e},v=function(){window.location.reload()},b=function(e,t){var n,i=e.changedAttributes();if(!i)return!1;for(n=0;n<t.length;n++)if(r.has(i,t[n]))return!0;return!1},x=function(e){return 0===e.length?n("Required field."):""},w=function(e,t){var r=x(e);if(r)return r;if(t){if(/\s/g.test(e))return n("Please do not use any spaces in this field.")}else if(e!==encodeURIComponent(e)||e.match(/[!'()*]/))return n("Please do not use any spaces or special characters in this field.");return""},k=function(t){var n=r.reduce(t,function(t,r){return t+e(r).val().length},0);return C>=n},S=function(t,n,i,a){k(i)?e(t.errorWrapper).removeClass(n.shown).addClass(n.hiding):(e(t.errorWrapper).addClass(n.shown).removeClass(n.hiding),e(t.errorMessage).html("<p>"+r.template(a)({limit:C})+"</p>"),e(t.save).addClass(n.disabled))},j=function(r){var n=e.Deferred();return t([r],function(){n.resolve()},function(){n.reject()}),n.promise()},{toggleExpandCollapse:o,showLoadingIndicator:s,hideLoadingIndicator:c,confirmThenRunOperation:l,runOperationShowingMessage:u,withDisabledElement:p,disableElementWhileRunning:f,deleteNotificationHandler:y,setScrollTop:m,getScrollOffset:d,setScrollOffset:h,redirect:g,reload:v,hasChangedAttributes:b,validateRequiredField:x,validateURLItemEncoding:w,validateTotalKeyLength:k,checkTotalKeyLengthViolations:S,loadJavaScript:j}})}.call(this,define||RequireJS.define,require||RequireJS.require),define("js/views/utils/create_utils_base",["jquery","underscore","gettext","common/js/components/utils/view_utils"],function(e,t,r,n){return function(r,i,a,o,s){var c=this;return this.selectors=r,this.classes=i,this.validateRequiredField=n.validateRequiredField,this.validateURLItemEncoding=n.validateURLItemEncoding,this.keyLengthViolationMessage=a,this.keyFieldSelectors=o,this.nonEmptyCheckFieldSelectors=s,this.create=function(){},this.validateTotalKeyLength=function(){n.checkTotalKeyLengthViolations(c.selectors,c.classes,c.keyFieldSelectors,c.keyLengthViolationMessage)},this.toggleSaveButton=function(t){var r=!t;e(c.selectors.save).toggleClass(c.classes.disabled,r).attr("aria-disabled",r)},this.setFieldInErr=function(t,r){r?(t.addClass(c.classes.error),t.children(c.selectors.tipError).addClass(c.classes.showing).removeClass(c.classes.hiding).text(r),c.toggleSaveButton(!1)):(t.removeClass(c.classes.error),t.children(c.selectors.tipError).addClass(c.classes.hiding).removeClass(c.classes.showing),1===e(c.selectors.error).length&&c.toggleSaveButton(!0))},this.hasInvalidRequiredFields=function(){return t.reduce(c.nonEmptyCheckFieldSelectors,function(t,r){var n=e(r),i=c.validateRequiredField(n.val());return c.setFieldInErr(n.parent(),i),i?!0:t},!1)},this.validateFilledFields=function(){return t.reduce(c.nonEmptyCheckFieldSelectors,function(t,r){var n=e(r);return 0!==n.val().length?t:!1},!0)},this.configureHandlers=function(){t.each(c.keyFieldSelectors,function(t){var r=e(t);r.on("keyup",function(t){if(t.keyCode!==e.ui.keyCode.TAB){var n=c.validateURLItemEncoding(r.val(),"True"===e(c.selectors.allowUnicode).val());c.setFieldInErr(r.parent(),n),c.validateTotalKeyLength(),c.validateFilledFields()||c.toggleSaveButton(!1)}})});var r=e(c.selectors.name);r.on("keyup",function(){var e=c.validateRequiredField(r.val());c.setFieldInErr(r.parent(),e),c.validateTotalKeyLength(),c.validateFilledFields()||c.toggleSaveButton(!1)})},{validateTotalKeyLength:c.validateTotalKeyLength,setFieldInErr:c.setFieldInErr,hasInvalidRequiredFields:c.hasInvalidRequiredFields,create:c.create,validateFilledFields:c.validateFilledFields,configureHandlers:c.configureHandlers}}}),define("js/views/utils/create_course_utils",["jquery","gettext","common/js/components/utils/view_utils","js/views/utils/create_utils_base"],function(e,t,r,n){return function(i,a){var o=t("The combined length of the organization, course number, and course run fields cannot be more than <%=limit%> characters."),s=[i.org,i.number,i.run],c=[i.name,i.org,i.number,i.run];n.call(this,i,a,o,s,c),this.setupOrgAutocomplete=function(){e.getJSON("/organizations",function(t){e(i.org).autocomplete({source:t})})},this.create=function(t,n){e.postJSON("/course/",t,function(e){void 0!==e.url?r.redirect(e.url):void 0!==e.ErrMsg&&n(e.ErrMsg)})}}}),define("js/views/utils/create_library_utils",["jquery","gettext","common/js/components/utils/view_utils","js/views/utils/create_utils_base"],function(e,t,r,n){return function(i,a){var o=t("The combined length of the organization and library code fields cannot be more than <%=limit%> characters."),s=[i.org,i.number],c=[i.name,i.org,i.number];n.call(this,i,a,o,s,c),this.create=function(t,n){e.postJSON("/library/",t).done(function(e){r.redirect(e.url)}).fail(function(t,r,i){var a=i;if(t.responseText)try{var o=e.parseJSON(t.responseText).ErrMsg;o&&(a=o)}catch(s){}n(a)})}}}),define("js/index",["domReady","jquery","underscore","js/utils/cancel_on_escape","js/views/utils/create_course_utils","js/views/utils/create_library_utils","common/js/components/utils/view_utils"],function(e,t,r,n,i,a,o){var s=new i({name:".new-course-name",org:".new-course-org",number:".new-course-number",run:".new-course-run",save:".new-course-save",errorWrapper:".create-course .wrap-error",errorMessage:"#course_creation_error",tipError:".create-course span.tip-error",error:".create-course .error",allowUnicode:".allow-unicode-course-id"},{shown:"is-shown",showing:"is-showing",hiding:"is-hiding",disabled:"is-disabled",error:"error"}),c=new a({name:".new-library-name",org:".new-library-org",number:".new-library-number",save:".new-library-save",errorWrapper:".create-library .wrap-error",errorMessage:"#library_creation_error",tipError:".create-library  span.tip-error",error:".create-library .error",allowUnicode:".allow-unicode-library-id"},{shown:"is-shown",showing:"is-showing",hiding:"is-hiding",disabled:"is-disabled",error:"error"}),l=function(e){if(e.preventDefault(),!s.hasInvalidRequiredFields()){var r=t(this).closest("#create-course-form"),n=r.find(".new-course-name").val(),i=r.find(".new-course-org").val(),a=r.find(".new-course-number").val(),o=r.find(".new-course-run").val(),c={org:i,number:a,display_name:n,run:o};analytics.track("Created a Course",c),s.create(c,function(e){t(".create-course .wrap-error").addClass("is-shown"),t("#course_creation_error").html("<p>"+e+"</p>"),t(".new-course-save").addClass("is-disabled").attr("aria-disabled",!0)})}},u=function(e){return function(r){r.preventDefault(),t(".new-"+e+"-button").removeClass("is-disabled").attr("aria-disabled",!1),t(".wrapper-create-"+e).removeClass("is-shown"),t("#create-"+e+"-form input[type=text]").val(""),t("#"+e+"_creation_error").html(""),t(".create-"+e+" .wrap-error").removeClass("is-shown"),t(".new-"+e+"-save").off("click")}},p=function(e){e.preventDefault(),t(".new-course-button").addClass("is-disabled").attr("aria-disabled",!0),t(".new-course-save").addClass("is-disabled").attr("aria-disabled",!0);var r=t(".wrapper-create-course").addClass("is-shown"),i=r.find(".new-course-cancel"),a=t(".new-course-name");a.focus().select(),t(".new-course-save").on("click",l),i.bind("click",u("course")),n(i),s.setupOrgAutocomplete(),s.configureHandlers()},f=function(e){if(e.preventDefault(),!c.hasInvalidRequiredFields()){var r=t(this).closest("#create-library-form"),n=r.find(".new-library-name").val(),i=r.find(".new-library-org").val(),a=r.find(".new-library-number").val(),o={org:i,number:a,display_name:n};analytics.track("Created a Library",o),c.create(o,function(e){t(".create-library .wrap-error").addClass("is-shown"),t("#library_creation_error").html("<p>"+e+"</p>"),t(".new-library-save").addClass("is-disabled").attr("aria-disabled",!0)})}},d=function(e){e.preventDefault(),t(".new-library-button").addClass("is-disabled").attr("aria-disabled",!0),t(".new-library-save").addClass("is-disabled").attr("aria-disabled",!0);var r=t(".wrapper-create-library").addClass("is-shown"),i=r.find(".new-library-cancel"),a=t(".new-library-name");a.focus().select(),t(".new-library-save").on("click",f),i.bind("click",u("library")),n(i),c.configureHandlers()},h=function(e){return function(r){r.preventDefault(),t(".courses-tab").toggleClass("active","courses"===e),t(".libraries-tab").toggleClass("active","libraries"===e),t(".programs-tab").toggleClass("active","programs"===e),t(".wrapper-creationrights").toggleClass("is-hidden","courses"!==e)}},m=function(){t(".new-course-button").bind("click",p),t(".new-library-button").bind("click",d),t(".dismiss-button").bind("click",o.deleteNotificationHandler(function(){o.reload()})),t(".action-reload").bind("click",o.reload),t("#course-index-tabs .courses-tab").bind("click",h("courses")),t("#course-index-tabs .libraries-tab").bind("click",h("libraries")),t("#course-index-tabs .programs-tab").bind("click",h("programs"))};return e(m),{onReady:m}}),define("js/factories/index",["jquery.form","js/index"],function(){return function(){$(".show-creationrights").click(function(e){e.preventDefault(),$(this).closest(".wrapper-creationrights").toggleClass("is-shown").find(".ui-toggle-control").toggleClass("current")});var e=function(){location.reload()},t=function(){$("#request-coursecreator-submit").toggleClass("has-error").find(".label").text("Sorry, there was error with your request"),$("#request-coursecreator-submit").find(".fa-cog").toggleClass("fa-spin")};$("#request-coursecreator").ajaxForm({error:t,success:e}),$("#request-coursecreator-submit").click(function(){$(this).toggleClass("is-disabled is-submitting").attr("aria-disabled",$(this).hasClass("is-disabled")).find(".label").text("Submitting Your Request")})}});